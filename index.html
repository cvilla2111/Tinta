<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Annotator - Professional Stylus Edition 2</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-file-pdf"></i>
                <h1>PDF Annotator - Professional Stylus Edition 2</h1>
            </div>
            <div class="user-info">
                <span>Welcome, User</span>
                <div class="user-avatar">U</div>
            </div>
        </div>
    </header>
    
    <main>
        <aside class="sidebar">
            <h2>Annotation Tools</h2>
            
            <div class="tool-section">
                <h3>Tools</h3>
                <div class="tools">
                    <div class="tool-btn" data-tool="select">
                        <i class="fas fa-mouse-pointer"></i>
                        <span>Select</span>
                    </div>
                    <div class="tool-btn" data-tool="text">
                        <i class="fas fa-font"></i>
                        <span>Text</span>
                    </div>
                    <div class="tool-btn" data-tool="highlight">
                        <i class="fas fa-highlighter"></i>
                        <span>Highlight</span>
                    </div>
                    <div class="tool-btn stylus-tool active" data-tool="pen">
                        <i class="fas fa-pen"></i>
                        <span>Pen</span>
                    </div>
                    <div class="tool-btn" data-tool="eraser">
                        <i class="fas fa-eraser"></i>
                        <span>Eraser</span>
                    </div>
                    <div class="tool-btn" data-tool="rectangle">
                        <i class="fas fa-square"></i>
                        <span>Rectangle</span>
                    </div>
                    <div class="tool-btn" data-tool="circle">
                        <i class="fas fa-circle"></i>
                        <span>Circle</span>
                    </div>
                    <div class="tool-btn" data-tool="line">
                        <i class="fas fa-minus"></i>
                        <span>Line</span>
                    </div>
                </div>
            </div>
            
            <div class="tool-section">
                <h3>Colors</h3>
                <div class="color-picker">
                    <div class="color-option active" style="background-color: #000000;" data-color="#000000"></div>
                    <div class="color-option" style="background-color: #e74c3c;" data-color="#e74c3c"></div>
                    <div class="color-option" style="background-color: #3498db;" data-color="#3498db"></div>
                    <div class="color-option" style="background-color: #2ecc71;" data-color="#2ecc71"></div>
                    <div class="color-option" style="background-color: #f1c40f;" data-color="#f1c40f"></div>
                    <div class="color-option" style="background-color: #9b59b6;" data-color="#9b59b6"></div>
                    <div class="color-option" style="background-color: #34495e;" data-color="#34495e"></div>
                </div>
            </div>
            
            <div class="tool-section stylus-settings">
                <h3>Stylus Settings</h3>
                
                <div class="setting-item">
                    <label>Pressure Sensitivity: <span class="setting-value" id="pressure-value">27%</span></label>
                    <input type="range" id="pressure-sensitivity" min="0" max="100" value="28">
                    <div class="pressure-indicator">
                        <div class="pressure-bar" id="pressure-bar"></div>
                    </div>
                </div>
                
                <div class="setting-item">
                    <label>Tilt Sensitivity: <span class="setting-value" id="tilt-value">50%</span></label>
                    <input type="range" id="tilt-sensitivity" min="0" max="100" value="50">
                    <div class="tilt-indicator">
                        <span class="tilt-value">X: <span id="tilt-x">0</span>°</span>
                        <span class="tilt-value">Y: <span id="tilt-y">0</span>°</span>
                    </div>
                </div>
                
                <div class="setting-item">
                    <label>Min Line Width: <span class="setting-value" id="min-width-value">0.1px</span></label>
                    <input type="range" id="min-line-width" min="0.1" max="5" step="0.1" value="1">
                </div>
                
                <div class="setting-item">
                    <label>Max Line Width: <span class="setting-value" id="max-width-value">5.2px</span></label>
                    <input type="range" id="max-line-width" min="0.1" max="10" step="0.1" value="5.2">
                </div>
                
                <div class="setting-item">
                    <label>
                        <input type="checkbox" id="opacity-pressure"> Pressure Opacity
                    </label>
                </div>
                
                <div class="setting-item">
                    <label>
                        <input type="checkbox" id="palm-rejection"> Palm Rejection
                    </label>
                </div>
                
                <div class="button-config">
                    <label>Stylus Button Configuration</label>
                    <div class="button-config-item">
                        <div class="button-label">
                            <div class="button-icon">B1</div>
                            <span>Button 1 (Barrel)</span>
                        </div>
                        <div class="button-toggle active" id="button1-toggle">
                            <div class="button-toggle-slider"></div>
                        </div>
                    </div>
                    <div class="button-config-item">
                        <div class="button-label">
                            <div class="button-icon">B2</div>
                            <span>Button 2 (Secondary)</span>
                        </div>
                        <div class="button-toggle active" id="button2-toggle">
                            <div class="button-toggle-slider"></div>
                        </div>
                    </div>
                    <button class="button-test" id="test-buttons">Test Button Detection</button>
                </div>
                
                <div class="ink-preview">
                    <label>Ink Preview</label>
                    <canvas class="ink-preview-canvas" id="ink-preview"></canvas>
                </div>
                
                <div class="stylus-status">
                    <label>Stylus Mode:</label>
                    <div>
                        <span class="status-indicator status-pen" id="status-indicator"></span>
                        <span id="status-text">Pen</span>
                    </div>
                </div>
                
                <div class="debug-info" id="debug-info" style="display: none;">
                    <label>Stylus Debug Info:</label>
                    <div class="debug-item">Buttons: <span id="debug-buttons">0</span></div>
                    <div class="debug-item">Button 1: <span id="debug-button1">No</span></div>
                    <div class="debug-item">Button 2: <span id="debug-button2">No</span></div>
                    <div class="debug-item">Button Property: <span id="debug-button-prop">None</span></div>
                    <div class="debug-item">Pressure: <span id="debug-pressure">0</span></div>
                    <div class="debug-item">Detection Method: <span id="debug-method">None</span></div>
                </div>
            </div>
            
            <div class="tool-section">
                <h3>Actions</h3>
                <button class="btn" id="clear-annotations">
                    <i class="fas fa-eraser"></i> Clear All
                </button>
                <button class="btn" id="toggle-debug" style="margin-top: 8px; width: 100%;">
                    <i class="fas fa-bug"></i> Toggle Debug
                </button>
            </div>
        </aside>
        
        <section class="pdf-container">
            <div class="pdf-toolbar">
                <div class="pdf-actions">
                    <button class="btn" id="upload-btn">
                        <i class="fas fa-upload"></i> Upload PDF
                    </button>
                    <input type="file" id="file-input" class="file-input" accept=".pdf">
                    <button class="btn btn-stylus" id="calibrate-stylus">
                        <i class="fas fa-sliders-h"></i> Calibrate Stylus
                    </button>
                    <button class="btn btn-secondary" id="save-btn" disabled>
                        <i class="fas fa-save"></i> Save Annotated
                    </button>
                    <button class="btn fullscreen-btn" id="fullscreen-btn">
                        <i class="fas fa-expand"></i> Fullscreen
                    </button>
                </div>
                
                <div class="page-navigation">
                    <button class="nav-btn" id="prev-page" disabled>
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <span class="page-info">Page <span id="page-num">0</span> of <span id="page-count">0</span></span>
                    <button class="nav-btn" id="next-page" disabled>
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                
                <div class="zoom-controls">
                    <button class="zoom-btn" id="zoom-out">
                        <i class="fas fa-minus"></i>
                    </button>
                    <span class="zoom-level" id="zoom-level">100%</span>
                    <button class="zoom-btn" id="zoom-in">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>
            
            <div class="pdf-viewer" id="pdf-viewer">
                <div class="upload-area" id="upload-area">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <h3>Upload a PDF Document</h3>
                    <p>Drag and drop a PDF file here or click the button below to browse</p>
                    <button class="upload-btn" id="upload-area-btn">Select PDF File</button>
                </div>
            </div>
        </section>
    </main>
    
    <div class="annotation-popup" id="annotation-popup">
        <button id="delete-annotation">
            <i class="fas fa-trash"></i> Delete Annotation
        </button>
    </div>
    
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toast-message">Action completed successfully</span>
    </div>
    
    <div class="eraser-cursor" id="eraser-cursor"></div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
