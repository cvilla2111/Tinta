<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Viewer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-left">
                <button id="scrollToggleBtn" class="btn btn-icon-sm" title="Enable Finger Scroll">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" id="scrollIcon">
                        <path d="M18 11V6a2 2 0 0 0-4 0v5M14 11V4a2 2 0 0 0-4 0v7M10 11V6a2 2 0 0 0-4 0v5M6 11v4a8 8 0 0 0 8 8h.3a8 8 0 0 0 7.7-6.1l1-4A2 2 0 0 0 21 10h-2"></path>
                        <line x1="12" y1="2" x2="12" y2="22" stroke-dasharray="2,2" opacity="0.5"></line>
                    </svg>
                </button>
                <div style="width: 28px;"></div>
                <button id="undoBtn" class="btn btn-icon-sm" title="Undo" disabled>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 7v6h6"></path>
                        <path d="M21 17a9 9 0 00-9-9 9 9 0 00-6 2.3L3 13"></path>
                    </svg>
                </button>
                <button id="redoBtn" class="btn btn-icon-sm" title="Redo" disabled>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 7v6h-6"></path>
                        <path d="M3 17a9 9 0 019-9 9 9 0 016 2.3L21 13"></path>
                    </svg>
                </button>
                <div style="width: 28px;"></div>
                <div class="toolbar-group">
                    <button id="zoomOut" class="btn btn-icon-sm" title="Zoom Out">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="8" y1="11" x2="14" y2="11"></line>
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                    </button>
                    <span class="zoom-level" id="zoomLevel">100%</span>
                    <button id="zoomIn" class="btn btn-icon-sm" title="Zoom In">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="11" y1="8" x2="11" y2="14"></line>
                            <line x1="8" y1="11" x2="14" y2="11"></line>
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                    </button>
                    <button id="zoomFit" class="btn btn-icon-sm" title="Fit to Width">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="9" y1="3" x2="9" y2="21"></line>
                            <line x1="15" y1="3" x2="15" y2="21"></line>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="header-controls" id="headerControls" style="display: none;">
                <!-- Pen Tool with Modal -->
                <div class="toolbar-group pen-picker-container">
                    <button id="penBtn" class="btn btn-icon-sm tool-active" title="Pen">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 19l7-7 3 3-7 7-3-3z"></path>
                            <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path>
                        </svg>
                    </button>

                    <!-- Stroke Width Modal -->
                    <div id="strokePickerModal" class="stroke-modal" style="display: none;">
                        <div class="stroke-grid">
                            <button class="stroke-option" data-width="1" title="Extra Thin">
                                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="1">
                                    <line x1="4" y1="14" x2="24" y2="14"></line>
                                </svg>
                            </button>
                            <button class="stroke-option" data-width="2" title="Thin">
                                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="4" y1="14" x2="24" y2="14"></line>
                                </svg>
                            </button>
                            <button class="stroke-option stroke-active" data-width="3" title="Medium Thin">
                                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="3">
                                    <line x1="4" y1="14" x2="24" y2="14"></line>
                                </svg>
                            </button>
                            <button class="stroke-option" data-width="4" title="Medium">
                                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="4">
                                    <line x1="4" y1="14" x2="24" y2="14"></line>
                                </svg>
                            </button>
                            <button class="stroke-option" data-width="5" title="Medium Thick">
                                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="5">
                                    <line x1="4" y1="14" x2="24" y2="14"></line>
                                </svg>
                            </button>
                            <button class="stroke-option" data-width="6" title="Thick">
                                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="6">
                                    <line x1="4" y1="14" x2="24" y2="14"></line>
                                </svg>
                            </button>
                            <button class="stroke-option" data-width="8" title="Extra Thick">
                                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="8">
                                    <line x1="4" y1="14" x2="24" y2="14"></line>
                                </svg>
                            </button>
                            <button class="stroke-option" data-width="10" title="Very Thick">
                                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="10">
                                    <line x1="4" y1="14" x2="24" y2="14"></line>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Eraser Tool with Modal -->
                <div class="toolbar-group eraser-picker-container">
                    <button id="eraserBtn" class="btn btn-icon-sm" title="Eraser">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 20H7L3 16l7-7 9 9v2z"></path>
                        </svg>
                    </button>

                    <!-- Eraser Modal -->
                    <div id="eraserModal" class="eraser-modal" style="display: none;">
                        <button id="clearBtn" class="eraser-option clear-option" title="Clear All Annotations">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="3 6 5 6 21 6"></polyline>
                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"></path>
                            </svg>
                            <span>Clear All</span>
                        </button>
                    </div>
                </div>

                <!-- Colors -->
                <div class="toolbar-group color-picker-container">
                    <button id="colorPickerBtn" class="btn btn-icon-sm" title="Color Picker">
                        <div class="color-indicator" style="background: #000000;"></div>
                    </button>

                    <!-- Color Picker Modal -->
                    <div id="colorPickerModal" class="color-modal" style="display: none;">
                        <div class="color-grid">
                            <button class="color-option" data-color="#000000" style="background: #000000;" title="Black"></button>
                            <button class="color-option" data-color="#FFFFFF" style="background: #FFFFFF; border: 1px solid #ccc;" title="White"></button>
                            <button class="color-option" data-color="#FF0000" style="background: #FF0000;" title="Red"></button>
                            <button class="color-option" data-color="#FF6B00" style="background: #FF6B00;" title="Orange"></button>
                            <button class="color-option" data-color="#FFD700" style="background: #FFD700;" title="Gold"></button>
                            <button class="color-option" data-color="#FFFF00" style="background: #FFFF00;" title="Yellow"></button>

                            <button class="color-option" data-color="#00FF00" style="background: #00FF00;" title="Lime"></button>
                            <button class="color-option" data-color="#00AA00" style="background: #00AA00;" title="Green"></button>
                            <button class="color-option" data-color="#00FFFF" style="background: #00FFFF;" title="Cyan"></button>
                            <button class="color-option" data-color="#0099FF" style="background: #0099FF;" title="Light Blue"></button>
                            <button class="color-option" data-color="#0000FF" style="background: #0000FF;" title="Blue"></button>
                            <button class="color-option" data-color="#0000AA" style="background: #0000AA;" title="Dark Blue"></button>

                            <button class="color-option" data-color="#9900FF" style="background: #9900FF;" title="Purple"></button>
                            <button class="color-option" data-color="#FF00FF" style="background: #FF00FF;" title="Magenta"></button>
                            <button class="color-option" data-color="#FF1493" style="background: #FF1493;" title="Hot Pink"></button>
                            <button class="color-option" data-color="#FF69B4" style="background: #FF69B4;" title="Pink"></button>
                            <button class="color-option" data-color="#8B0000" style="background: #8B0000;" title="Dark Red"></button>
                            <button class="color-option" data-color="#A0522D" style="background: #A0522D;" title="Brown"></button>

                            <button class="color-option" data-color="#666666" style="background: #666666;" title="Dark Gray"></button>
                            <button class="color-option" data-color="#999999" style="background: #999999;" title="Gray"></button>
                            <button class="color-option" data-color="#00CED1" style="background: #00CED1;" title="Turquoise"></button>
                            <button class="color-option" data-color="#32CD32" style="background: #32CD32;" title="Lime Green"></button>
                            <button class="color-option" data-color="#FFB6C1" style="background: #FFB6C1;" title="Light Pink"></button>
                            <button class="color-option" data-color="#FFA500" style="background: #FFA500;" title="Orange"></button>
                        </div>
                    </div>
                </div>

                <!-- Fullscreen -->
                <button id="fullscreenBtn" class="btn btn-icon-sm" title="Fullscreen">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" id="fullscreenIcon">
                        <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>
                    </svg>
                </button>

            </div>

            <div class="header-right" id="headerRight" style="display: none;">
                <!-- Menu -->
                <div class="toolbar-group menu-container">
                    <button id="menuBtn" class="btn btn-icon-sm" title="Menu">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="1"></circle>
                            <circle cx="12" cy="5" r="1"></circle>
                            <circle cx="12" cy="19" r="1"></circle>
                        </svg>
                    </button>

                    <!-- Menu Modal -->
                    <div id="menuModal" class="menu-modal" style="display: none;">
                        <input type="file" id="fileInput" accept=".pdf" hidden>
                        <button id="openFileBtn" class="menu-option" title="Open PDF">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
                                <polyline points="13 2 13 9 20 9"></polyline>
                            </svg>
                            <span>Open PDF</span>
                        </button>
                        <button id="themeToggleBtn" class="menu-option" title="Toggle Theme">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" id="themeIcon">
                                <circle cx="12" cy="12" r="5"></circle>
                                <line x1="12" y1="1" x2="12" y2="3"></line>
                                <line x1="12" y1="21" x2="12" y2="23"></line>
                                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                <line x1="1" y1="12" x2="3" y2="12"></line>
                                <line x1="21" y1="12" x2="23" y2="12"></line>
                                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                            </svg>
                            <span id="themeLabel">Dark Mode</span>
                        </button>
                    </div>
                </div>

                <!-- Spacer -->
                <div style="width: 28px;"></div>

                <!-- Navigation -->
                <div class="toolbar-group">
                    <button id="prevPage" class="btn btn-icon-sm" title="Previous Page">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="15 18 9 12 15 6"></polyline>
                        </svg>
                    </button>
                    <div class="page-info">
                        <span id="pageNum">1</span>/<span id="pageCount">0</span>
                    </div>
                    <button id="nextPage" class="btn btn-icon-sm" title="Next Page">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <div class="main-content">
            <div class="welcome-screen" id="welcomeScreen">
                <div class="welcome-content">
                    <input type="file" id="welcomeFileInput" accept=".pdf" hidden>
                    <button id="welcomeOpenBtn" class="upload-box">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                    </button>
                    <h2>Welcome to PDF Viewer</h2>
                    <p>Click the box above to select a PDF file</p>
                </div>
            </div>

            <div class="pdf-viewer" id="pdfViewer" style="display: none;">
                <div class="canvas-container" id="canvasContainer">
                    <div class="pdf-wrapper" id="pdfWrapper">
                        <canvas id="pdfCanvas"></canvas>
                        <svg id="annotationLayer" class="annotation-layer"></svg>
                        <canvas id="activeStrokeCanvas" class="active-stroke-layer"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page Filmstrip Modal -->
        <div id="filmstripModal" class="filmstrip-overlay" style="display: none;">
            <div class="filmstrip-container">
                <div class="filmstrip-header">
                    <h3>Pages</h3>
                    <button id="closeFilmstrip" class="btn-close-filmstrip">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
                <div class="filmstrip-content" id="filmstripContent">
                    <!-- Thumbnails will be generated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- PDF.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
