<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Viewer</title>
    <link rel="stylesheet" href="styles.css?v=7">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-left">
                <button id="scrollToggleBtn" class="btn btn-icon-sm" title="Enable Finger Scroll">
                    <img src="icons/hand.svg" width="24" height="24" alt="Finger Scroll" id="scrollIcon">
                </button>
                <div style="width: 28px;"></div>
                <button id="undoBtn" class="btn btn-icon-sm" title="Undo" disabled>
                    <img src="icons/undo-2.svg" width="24" height="24" alt="Undo">
                </button>
                <button id="redoBtn" class="btn btn-icon-sm" title="Redo" disabled>
                    <img src="icons/redo-2.svg" width="24" height="24" alt="Redo">
                </button>
                <div style="width: 28px;"></div>
                <div class="toolbar-group">
                    <button id="zoomOut" class="btn btn-icon-sm" title="Zoom Out">
                    <img src="icons/zoom-out.svg" width="24" height="24" alt="Zoom Out">
                </button>
                    <button id="zoomFit" class="btn btn-text-sm" title="Fit to Width">Fit</button>
                    <button id="zoomIn" class="btn btn-icon-sm" title="Zoom In">
                    <img src="icons/zoom-in.svg" width="24" height="24" alt="Zoom In">
                </button>
                </div>
            </div>

            <div class="header-controls" id="headerControls" style="display: none;">
                <!-- Pen Tool with Modal -->
                <div class="toolbar-group pen-picker-container">
                    <button id="penBtn" class="btn btn-icon-sm tool-active" title="Pen">
                    <img src="icons/pen-tool.svg" width="24" height="24" alt="Pen">
                </button>

                    <!-- Stroke Width Modal -->
                    <div id="strokePickerModal" class="stroke-modal" style="display: none;">
                        <div class="stroke-grid">
                            <button class="stroke-option" data-width="1" title="Extra Thin">
                                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="1">
                                    <line x1="4" y1="14" x2="24" y2="14"></line>
                                </svg>
                            </button>
                            <button class="stroke-option" data-width="2" title="Thin">
                                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="4" y1="14" x2="24" y2="14"></line>
                                </svg>
                            </button>
                            <button class="stroke-option stroke-active" data-width="3" title="Medium Thin">
                                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="3">
                                    <line x1="4" y1="14" x2="24" y2="14"></line>
                                </svg>
                            </button>
                            <button class="stroke-option" data-width="4" title="Medium">
                                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="4">
                                    <line x1="4" y1="14" x2="24" y2="14"></line>
                                </svg>
                            </button>
                            <button class="stroke-option" data-width="5" title="Medium Thick">
                                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="5">
                                    <line x1="4" y1="14" x2="24" y2="14"></line>
                                </svg>
                            </button>
                            <button class="stroke-option" data-width="6" title="Thick">
                                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="6">
                                    <line x1="4" y1="14" x2="24" y2="14"></line>
                                </svg>
                            </button>
                            <button class="stroke-option" data-width="8" title="Extra Thick">
                                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="8">
                                    <line x1="4" y1="14" x2="24" y2="14"></line>
                                </svg>
                            </button>
                            <button class="stroke-option" data-width="10" title="Very Thick">
                                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="10">
                                    <line x1="4" y1="14" x2="24" y2="14"></line>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Eraser Tool with Modal -->
                <div class="toolbar-group eraser-picker-container">
                    <button id="eraserBtn" class="btn btn-icon-sm" title="Eraser">
                    <img src="icons/eraser.svg" width="24" height="24" alt="Eraser">
                </button>

                    <!-- Eraser Modal -->
                    <div id="eraserModal" class="eraser-modal" style="display: none;">
                        <button id="clearBtn" class="eraser-option clear-option" title="Clear All Annotations">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="3 6 5 6 21 6"></polyline>
                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"></path>
                            </svg>
                            <span>Clear All</span>
                        </button>
                    </div>
                </div>

                <!-- Laser Pointer Tool -->
                <button id="laserBtn" class="btn btn-icon-sm" title="Laser Pointer">
                    <img src="icons/wand.svg" width="24" height="24" alt="Laser">
                </button>

                <!-- Colors -->
                <div class="toolbar-group color-picker-container">
                    <button id="colorPickerBtn" class="btn btn-icon-sm" title="Color Picker">
                        <div class="color-indicator" style="background: #000000;"></div>
                    </button>

                    <!-- Color Picker Modal -->
                    <div id="colorPickerModal" class="color-modal" style="display: none;">
                        <div class="color-grid">
                            <button class="color-option" data-color="#000000" title="Black">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#000000"/></svg>
                            </button>
                            <button class="color-option" data-color="#FFFFFF" title="White">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#FFFFFF" stroke="#ccc" stroke-width="1"/></svg>
                            </button>
                            <button class="color-option" data-color="#FF0000" title="Red">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#FF0000"/></svg>
                            </button>
                            <button class="color-option" data-color="#FF6B00" title="Orange">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#FF6B00"/></svg>
                            </button>
                            <button class="color-option" data-color="#FFD700" title="Gold">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#FFD700"/></svg>
                            </button>
                            <button class="color-option" data-color="#FFFF00" title="Yellow">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#FFFF00"/></svg>
                            </button>

                            <button class="color-option" data-color="#00FF00" title="Lime">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#00FF00"/></svg>
                            </button>
                            <button class="color-option" data-color="#00AA00" title="Green">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#00AA00"/></svg>
                            </button>
                            <button class="color-option" data-color="#00FFFF" title="Cyan">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#00FFFF"/></svg>
                            </button>
                            <button class="color-option" data-color="#0099FF" title="Light Blue">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#0099FF"/></svg>
                            </button>
                            <button class="color-option" data-color="#0000FF" title="Blue">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#0000FF"/></svg>
                            </button>
                            <button class="color-option" data-color="#0000AA" title="Dark Blue">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#0000AA"/></svg>
                            </button>

                            <button class="color-option" data-color="#9900FF" title="Purple">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#9900FF"/></svg>
                            </button>
                            <button class="color-option" data-color="#FF00FF" title="Magenta">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#FF00FF"/></svg>
                            </button>
                            <button class="color-option" data-color="#FF1493" title="Hot Pink">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#FF1493"/></svg>
                            </button>
                            <button class="color-option" data-color="#FF69B4" title="Pink">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#FF69B4"/></svg>
                            </button>
                            <button class="color-option" data-color="#8B0000" title="Dark Red">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#8B0000"/></svg>
                            </button>
                            <button class="color-option" data-color="#A0522D" title="Brown">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#A0522D"/></svg>
                            </button>

                            <button class="color-option" data-color="#666666" title="Dark Gray">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#666666"/></svg>
                            </button>
                            <button class="color-option" data-color="#999999" title="Gray">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#999999"/></svg>
                            </button>
                            <button class="color-option" data-color="#00CED1" title="Turquoise">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#00CED1"/></svg>
                            </button>
                            <button class="color-option" data-color="#32CD32" title="Lime Green">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#32CD32"/></svg>
                            </button>
                            <button class="color-option" data-color="#FFB6C1" title="Light Pink">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#FFB6C1"/></svg>
                            </button>
                            <button class="color-option" data-color="#FFA500" title="Orange">
                                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,2 C18,2.5 20,3 21.5,4.5 C22,5 23,5.5 24,6.5 C25.5,8 26.5,9 27,11 C27.5,12 28,13.5 28,15 C28,16.5 27.8,18 27,19.5 C26.5,20.5 26,21.5 25,23 C24,24 23,25 21.5,26 C20,27 18.5,27.5 17,28 C15.5,28.5 14,29 12.5,28.5 C11,28 9.5,27.5 8,26.5 C7,25.5 6,24.5 5,23 C4.5,22 4,20.5 3.5,19 C3,17.5 2.5,16 2.5,14.5 C2.5,13 3,11 4,9.5 C4.5,8.5 5.5,7.5 6.5,6.5 C8,5 9,4.5 10.5,3.5 C12,3 13.5,2.5 15,2.2 C15.5,2 16,2 16,2 Z" fill="#FFA500"/></svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Lasso Selection Tool -->
                <button id="lassoBtn" class="btn btn-icon-sm" title="Lasso Selection">
                    <img src="icons/lasso.svg" width="24" height="24" alt="Lasso">
                </button>

                <!-- Spacer -->
                <div style="width: 28px;"></div>

                <!-- Fullscreen -->
                <button id="fullscreenBtn" class="btn btn-icon-sm" title="Fullscreen">
                    <img src="icons/expand.svg" width="24" height="24" alt="Fullscreen" id="fullscreenIcon">
                </button>

            </div>

            <div class="header-right" id="headerRight" style="display: none;">
                <!-- Present to Second Screen -->
                <button id="presentBtn" class="btn btn-icon-sm" title="Present to Second Screen">
                    <img src="icons/cast.svg" width="24" height="24" alt="Present">
                </button>

                <!-- Spacer -->
                <div style="width: 28px;"></div>

                <!-- Menu -->
                <div class="toolbar-group menu-container">
                    <button id="menuBtn" class="btn btn-icon-sm" title="Menu">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="1"></circle>
                            <circle cx="12" cy="5" r="1"></circle>
                            <circle cx="12" cy="19" r="1"></circle>
                        </svg>
                    </button>

                    <!-- Menu Modal -->
                    <div id="menuModal" class="menu-modal" style="display: none;">
                        <input type="file" id="fileInput" accept=".pdf" hidden>
                        <button id="openFileBtn" class="menu-option" title="Open PDF">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
                                <polyline points="13 2 13 9 20 9"></polyline>
                            </svg>
                            <span>Open PDF</span>
                        </button>
                        <button id="themeToggleBtn" class="menu-option" title="Toggle Theme">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" id="themeIcon">
                                <circle cx="12" cy="12" r="5"></circle>
                                <line x1="12" y1="1" x2="12" y2="3"></line>
                                <line x1="12" y1="21" x2="12" y2="23"></line>
                                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                <line x1="1" y1="12" x2="3" y2="12"></line>
                                <line x1="21" y1="12" x2="23" y2="12"></line>
                                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                            </svg>
                            <span id="themeLabel">Dark Mode</span>
                        </button>
                        <div class="menu-separator"></div>
                        <button id="quitBtn" class="menu-option" title="Quit">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                <polyline points="16 17 21 12 16 7"></polyline>
                                <line x1="21" y1="12" x2="9" y2="12"></line>
                            </svg>
                            <span>Quit</span>
                        </button>
                    </div>
                </div>

                <!-- Spacer -->
                <div style="width: 28px;"></div>

                <!-- Navigation -->
                <div class="toolbar-group">
                    <button id="prevPage" class="btn btn-icon-sm" title="Previous Page">
                    <img src="icons/chevron-left.svg" width="24" height="24" alt="Previous">
                </button>
                    <div class="page-info">
                        <span id="pageNum">1</span>/<span id="pageCount">0</span>
                    </div>
                    <button id="nextPage" class="btn btn-icon-sm" title="Next Page">
                    <img src="icons/chevron-right.svg" width="24" height="24" alt="Next">
                </button>
                </div>
            </div>
        </header>

        <div class="main-content">
            <div class="welcome-screen" id="welcomeScreen">
                <div class="welcome-content">
                    <input type="file" id="welcomeFileInput" accept=".pdf" hidden>
                    <button id="welcomeOpenBtn" class="upload-box">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                    </button>
                    <h2>Welcome to PDF Viewer</h2>
                    <p>Click the box above to select a PDF file</p>
                </div>
            </div>

            <div class="pdf-viewer" id="pdfViewer" style="display: none;">
                <div class="canvas-container" id="canvasContainer">
                    <div class="pdf-wrapper" id="pdfWrapper">
                        <canvas id="pdfCanvas"></canvas>
                        <svg id="annotationLayer" class="annotation-layer"></svg>
                        <canvas id="activeStrokeCanvas" class="active-stroke-layer"></canvas>
                        <div id="pageTransitionOverlay" class="page-transition-overlay"></div>
                    </div>                </div>
            </div>
        </div>

        <!-- Page Filmstrip Modal -->
        <div id="filmstripModal" class="filmstrip-overlay" style="display: none;">
            <div class="filmstrip-container">
                <div class="filmstrip-header">
                    <h3>Pages</h3>
                    <button id="closeFilmstrip" class="btn-close-filmstrip">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
                <div class="filmstrip-content" id="filmstripContent">
                    <!-- Thumbnails will be generated here -->
                </div>
            </div>
        </div>

        <!-- Quit Confirmation Modal -->
        <div id="quitConfirmModal" class="quit-confirm-overlay" style="display: none;">
            <div class="quit-confirm-dialog">
                <h3>Quit Application</h3>
                <p>Are you sure you want to close the app?</p>
                <div class="quit-confirm-buttons">
                    <button id="quitCancelBtn" class="btn-quit-cancel">Cancel</button>
                    <button id="quitConfirmBtn" class="btn-quit-confirm">Quit</button>
                </div>
            </div>
        </div>
    </div>

    <!-- PDF.js Library -->
    <script src="pdf.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
