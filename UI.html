<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UI Grid Layout - 3:2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .canvas-container {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #ffffff;
        }

        .canvas-16-9 {
            position: relative;
            width: 100%;
            max-width: 100vh * 3 / 2;
            aspect-ratio: 3 / 2;
            background: #ffffff;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.1);
        }

        @media (max-aspect-ratio: 3/2) {
            .canvas-16-9 {
                width: 100%;
                height: auto;
            }
        }

        @media (min-aspect-ratio: 3/2) {
            .canvas-16-9 {
                width: auto;
                height: 100vh;
            }
        }

        .grid-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease;
            background-size: 5% 5%;
            background-image:
                linear-gradient(to right, rgba(93, 92, 222, 0.3) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(93, 92, 222, 0.3) 1px, transparent 1px);
        }

        /* Slider control */
        .slider-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            min-width: 200px;
            cursor: move;
        }

        .slider-container.dragging {
            cursor: grabbing;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25);
        }

        .slider-header {
            padding: 12px 20px 8px 20px;
            border-bottom: 1px solid #e0e0e0;
            cursor: grab;
            user-select: none;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #5D5CDE;
            font-weight: 600;
            font-size: 12px;
            font-family: monospace;
        }

        .slider-header:active {
            cursor: grabbing;
        }

        .drag-icon {
            width: 16px;
            height: 16px;
            opacity: 0.6;
        }

        .slider-content {
            padding: 16px 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .slider-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .slider-label {
            font-family: monospace;
            font-size: 12px;
            color: #5D5CDE;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .opacity-value {
            background: #f0f0ff;
            padding: 2px 8px;
            border-radius: 4px;
        }

        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #e0e0e0;
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #5D5CDE;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .slider::-webkit-slider-thumb:hover {
            background: #4a49c5;
            transform: scale(1.1);
        }

        .slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #5D5CDE;
            cursor: pointer;
            border: none;
            transition: all 0.2s ease;
        }

        .slider::-moz-range-thumb:hover {
            background: #4a49c5;
            transform: scale(1.1);
        }

        /* Grid info label */
        .grid-info {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 12px;
            color: #5D5CDE;
            font-family: monospace;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            z-index: 999;
        }

        /* Coordinate labels */
        .grid-coordinates {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .coord-label {
            position: absolute;
            font-family: monospace;
            font-size: 10px;
            color: #5D5CDE;
            font-weight: 600;
            background: rgba(255, 255, 255, 0.9);
            padding: 2px 4px;
            border-radius: 3px;
        }

        /* Horizontal labels (columns) */
        .coord-label.h {
            top: 2px;
            transform: translateX(-50%);
        }

        /* Vertical labels (rows) */
        .coord-label.v {
            left: 2px;
            transform: translateY(-50%);
        }

        /* Cursor coordinate display */
        .cursor-info {
            position: fixed;
            top: 60px;
            left: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 12px;
            color: #5D5CDE;
            font-family: monospace;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            z-index: 999;
            opacity: 0;
            transition: opacity 0.2s ease;
            pointer-events: none;
        }

        .cursor-info.active {
            opacity: 1;
        }

        /* Snap indicator */
        .snap-indicator {
            position: absolute;
            width: 12px;
            height: 12px;
            border: 2px solid #5D5CDE;
            border-radius: 50%;
            background: rgba(93, 92, 222, 0.3);
            pointer-events: none;
            transform: translate(-50%, -50%);
            opacity: 0;
            transition: opacity 0.15s ease;
            z-index: 100;
        }

        .snap-indicator.active {
            opacity: 1;
        }

        .snap-indicator::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 4px;
            height: 4px;
            background: #5D5CDE;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

    </style>
</head>
<body>
    <div class="canvas-container">
        <div class="canvas-16-9" id="canvas">
            <div class="grid-overlay" id="gridOverlay"></div>
            <div class="grid-coordinates" id="gridCoordinates"></div>
            <div class="snap-indicator" id="snapIndicator"></div>
        </div>
    </div>

    <div class="grid-info" id="gridInfo">
        Grid: 3:2 • Cell: 5% • Major: 10%
    </div>

    <div class="cursor-info" id="cursorInfo">
        X: 0, Y: 0
    </div>

    <div class="slider-container" id="sliderContainer">
        <div class="slider-header" id="sliderHeader">
            <svg class="drag-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="9" cy="5" r="1" fill="currentColor"></circle>
                <circle cx="9" cy="12" r="1" fill="currentColor"></circle>
                <circle cx="9" cy="19" r="1" fill="currentColor"></circle>
                <circle cx="15" cy="5" r="1" fill="currentColor"></circle>
                <circle cx="15" cy="12" r="1" fill="currentColor"></circle>
                <circle cx="15" cy="19" r="1" fill="currentColor"></circle>
            </svg>
            <span>GRID CONTROLS</span>
        </div>
        <div class="slider-content">
            <div class="slider-group">
                <div class="slider-label">
                    <span>Grid Opacity</span>
                    <span class="opacity-value" id="opacityValue">0%</span>
                </div>
                <input type="range" min="0" max="100" value="0" class="slider" id="gridSlider">
            </div>

            <div class="slider-group">
                <div class="slider-label">
                    <span>Grid Density</span>
                    <span class="opacity-value" id="densityValue">20×20</span>
                </div>
                <input type="range" min="4" max="40" value="20" class="slider" id="densitySlider">
            </div>
        </div>
    </div>

    <script>
        const gridSlider = document.getElementById('gridSlider');
        const densitySlider = document.getElementById('densitySlider');
        const gridOverlay = document.getElementById('gridOverlay');
        const gridCoordinates = document.getElementById('gridCoordinates');
        const opacityValue = document.getElementById('opacityValue');
        const densityValue = document.getElementById('densityValue');
        const gridInfo = document.getElementById('gridInfo');
        const canvas = document.getElementById('canvas');
        const snapIndicator = document.getElementById('snapIndicator');
        const cursorInfo = document.getElementById('cursorInfo');
        const sliderContainer = document.getElementById('sliderContainer');
        const sliderHeader = document.getElementById('sliderHeader');

        let currentDensity = 20;
        let snapEnabled = true;

        // Draggable slider container
        let isDragging = false;
        let currentX;
        let currentY;
        let initialX;
        let initialY;
        let xOffset = 0;
        let yOffset = 0;

        sliderHeader.addEventListener('mousedown', dragStart);
        document.addEventListener('mousemove', drag);
        document.addEventListener('mouseup', dragEnd);

        function dragStart(e) {
            initialX = e.clientX - xOffset;
            initialY = e.clientY - yOffset;

            if (e.target === sliderHeader || sliderHeader.contains(e.target)) {
                isDragging = true;
                sliderContainer.classList.add('dragging');
            }
        }

        function drag(e) {
            if (isDragging) {
                e.preventDefault();

                currentX = e.clientX - initialX;
                currentY = e.clientY - initialY;

                xOffset = currentX;
                yOffset = currentY;

                setTranslate(currentX, currentY, sliderContainer);
            }
        }

        function dragEnd(e) {
            if (isDragging) {
                initialX = currentX;
                initialY = currentY;
                isDragging = false;
                sliderContainer.classList.remove('dragging');
            }
        }

        function setTranslate(xPos, yPos, el) {
            el.style.transform = `translate(${xPos}px, ${yPos}px)`;
        }

        // Generate coordinate labels based on density
        function generateCoordinates(density) {
            gridCoordinates.innerHTML = '';

            // Calculate major grid step (always show 10 divisions)
            const step = Math.ceil(density / 10);

            // Horizontal labels (columns)
            for (let i = 0; i <= density; i += step) {
                const label = document.createElement('div');
                label.className = 'coord-label h';
                label.textContent = i;
                label.style.left = (i / density * 100) + '%';
                gridCoordinates.appendChild(label);
            }

            // Vertical labels (rows)
            for (let i = 0; i <= density; i += step) {
                const label = document.createElement('div');
                label.className = 'coord-label v';
                label.textContent = i;
                label.style.top = (i / density * 100) + '%';
                gridCoordinates.appendChild(label);
            }
        }

        // Update grid density
        function updateGridDensity(density) {
            currentDensity = density;
            const cellSize = 100 / density;
            const majorSize = 100 / 10; // Always 10 major divisions

            // Update fine grid
            gridOverlay.style.backgroundSize = `${cellSize}% ${cellSize}%`;

            // Update major grid (via ::before pseudo-element)
            // We need to update via CSS variable or inline style
            const majorGrid = cellSize * Math.ceil(density / 10);
            gridOverlay.style.setProperty('--major-size', `${majorGrid}%`);

            // Update coordinates
            generateCoordinates(density);

            // Update display
            densityValue.textContent = `${density}×${density}`;

            // Update info
            const majorStep = Math.ceil(density / 10);
            gridInfo.innerHTML = `Grid: 3:2 • Cell: ${density}×${density} • Major: every ${majorStep}`;
        }

        // Update grid opacity based on slider
        function updateGridOpacity(value) {
            const opacity = value / 100;
            gridOverlay.style.opacity = opacity;
            gridCoordinates.style.opacity = opacity;
            opacityValue.textContent = value + '%';
        }

        gridSlider.addEventListener('input', (e) => {
            updateGridOpacity(e.target.value);
        });

        densitySlider.addEventListener('input', (e) => {
            updateGridDensity(parseInt(e.target.value));
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Plus/Equals key to increase opacity
            if (e.key === '+' || e.key === '=') {
                const newValue = Math.min(100, parseInt(gridSlider.value) + 10);
                gridSlider.value = newValue;
                updateGridOpacity(newValue);
            }
            // Minus key to decrease opacity
            if (e.key === '-' || e.key === '_') {
                const newValue = Math.max(0, parseInt(gridSlider.value) - 10);
                gridSlider.value = newValue;
                updateGridOpacity(newValue);
            }
            // G key to toggle between 0% and 100%
            if (e.key === 'g' || e.key === 'G') {
                const newValue = gridSlider.value == 0 ? 100 : 0;
                gridSlider.value = newValue;
                updateGridOpacity(newValue);
            }
            // Bracket keys for density
            if (e.key === '[') {
                const newValue = Math.max(4, parseInt(densitySlider.value) - 2);
                densitySlider.value = newValue;
                updateGridDensity(newValue);
            }
            if (e.key === ']') {
                const newValue = Math.min(40, parseInt(densitySlider.value) + 2);
                densitySlider.value = newValue;
                updateGridDensity(newValue);
            }
        });

        // Snap to grid functionality
        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            // Calculate relative position (0-1)
            const relX = x / rect.width;
            const relY = y / rect.height;

            // Calculate grid position
            const gridX = relX * currentDensity;
            const gridY = relY * currentDensity;

            // Snap to nearest grid intersection
            const snappedX = Math.round(gridX);
            const snappedY = Math.round(gridY);

            // Convert back to percentage
            const snapPercentX = (snappedX / currentDensity) * 100;
            const snapPercentY = (snappedY / currentDensity) * 100;

            // Update snap indicator position
            if (snapEnabled) {
                snapIndicator.style.left = snapPercentX + '%';
                snapIndicator.style.top = snapPercentY + '%';
                snapIndicator.classList.add('active');
            }

            // Update cursor info
            cursorInfo.innerHTML = `X: ${snappedX}, Y: ${snappedY}`;
            cursorInfo.classList.add('active');
        });

        canvas.addEventListener('mouseleave', () => {
            snapIndicator.classList.remove('active');
            cursorInfo.classList.remove('active');
        });

        // Click to copy coordinates
        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            const relX = x / rect.width;
            const relY = y / rect.height;

            const snappedX = Math.round(relX * currentDensity);
            const snappedY = Math.round(relY * currentDensity);

            const coordText = `X:${snappedX}, Y:${snappedY}`;

            // Copy to clipboard
            navigator.clipboard.writeText(coordText).then(() => {
                // Show feedback
                const originalText = cursorInfo.innerHTML;
                cursorInfo.innerHTML = `📋 Copied: ${coordText}`;
                setTimeout(() => {
                    cursorInfo.innerHTML = originalText;
                }, 1000);
            });
        });

        // Initialize
        updateGridOpacity(0);
        updateGridDensity(20);
    </script>
</body>
</html>

